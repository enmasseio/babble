<!DOCTYPE html>
<html>
<head>
  <title>babble in the browser using pubnub</title>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/pubnub/3.5.4/pubnub.min.js"></script>
  <script src="../../../dist/babble.js"></script>
</head>
<body>

<div>First open emma.html in a browser, then open jack.html in a browser.</div>
<div id="log"></div>

<script>
  // initialize pubnub
  var pubnub = babble.pubsub.pubnub({
    publish_key: 'demo',    // REPLACE THIS WITH YOUR PUBNUB PUBLISH KEY
    subscribe_key: 'demo'   // REPLACE THIS WITH YOUR PUBNUB SUBSCRIBE KEY
  });

  var emma = babble.babbler('emma').subscribe(pubnub, function () {
    emma.listen('ask age',
        babble.reply(function (response) {
          return 25;
        })
        .done()
    );

    emma.listen('tell age',
        babble.run (function (age, context) {
          write(context.from + ' is ' +  age + ' years old');
        })
        .done()
    );
  });

  function write (message) {
    document.getElementById('log').innerHTML += message + '<br>';
  }

</script>

</body>
</html>